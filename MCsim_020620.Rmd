---
title: "MCsim_020620"
author: "Sarah I. Murphy"
date: "2/6/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Set-up environment
* load packages
* load functions
* load data
* set seed for reproducibilty
```{r}
## load packages
library(readr)

## load functions
source("UtilityFunctions.R")

## load data

#frequency data
frequency_file <- "Frequency.csv"
freq_import <- read.csv(frequency_file, stringsAsFactors = FALSE, header = TRUE)

#growth parameter data
growth_file <- "GrowthParameters.csv" #make sure this contains growth parameters & growth model name
growth_import <-read.csv(growth_file, stringsAsFactors = FALSE)

#initial count logMPN data
init_file <- "InitialCountsMPN.csv"
initialcount_import <- read.csv(init_file, stringsAsFactors = FALSE)

#temperature data for each stage
temp_by_stage <- read.csv(temp_stages_file, stringsAsFactors = F, comment.char = "#")

## set seed
set.seed(1)
```

# Set-up dataframe
```{r}
#Define number of simulations to run (also referred to as the number of bulk tanks; i.e., 1 simulation unit = 1 bulk tank of milk)
n_sim <-100    #1000 is for testing and exploring, experiments require at least 10k

#Define number of units per lot (currently, half gallon units) 
n_halfgal <-10

#Define number of shelf life days simulating
start_day <- 1 
end_day <- 24 #aka n_day

#prep sequences based on defined values above
BT <- rep(seq(1, n_sim), each = n_halfgal * n_day) #Repeat each element of the sequence 1..n_sim
half_gal <- rep(seq(1, n_halfgal), times = n_day * n_sim) #Repeat the whole sequences times # of times
AT <- vector(mode="logical", n_sim * n_halfgal * n_day) #Make a vector of "FALSE" ATs
day <- rep(rep(seq(start_day, start_day+n_day-1), each = n_halfgal), times = n_sim) #Repeat the days for each simulation run
count <- vector(mode = "logical", n_sim * n_halfgal * n_day)

#matrix with columns:
#  BT   half_gal    AT    day   count
data <- data.frame(BT, half_gal, AT, day, count)
```

